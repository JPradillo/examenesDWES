<?php
define("DIRECTORIO", $_SERVER['DOCUMENT_ROOT']);
// Creamos el directorio si no existe
if(!is_dir(DIRECTORIO)) {
    if(!mkdir(DIRECTORIO, 0755)) {
        echo "<h3>No se ha podido crear el directorio</h3>";
    } else {
        echo "<h3>El directorio se ha creado correctamente</h3>";
    }
} else {
    echo "<h3>El directorio " . DIRECTORIO . " ya existe</h3>";
}

if(isset($_POST['archivo'])) {
    // Si existe el archivo en el formulario de subida
    echo "<h3>Datos del archivo</h3>";
    echo "<p>Nombre: {$_FILES['archivo']['name']}</p>";
    echo "<p>Tipo: {$_FILES['archivo']['type']}</p>";
    echo "<p>Tamaño: {$_FILES['archivo']['size']}</p>";
    echo "<p>Archivo temporal: {$_FILES['archivo']['tmp_name']}</p>";
    echo "<p>Código de error: {$_FILES['archivo']['error']}</p>";
} elseif($_FILES['archivo']['error'] == UPLOAD_ERR_NO_FILE) {
    // El archivo no se ha subido
    echo "<h3>ERROR. El archivo no se ha subido</h3>";
} elseif($_FILES['archivo']['error'] == UPLOAD_ERR_FORM_SIZE) {
    // El tamaño del fichero supera el tamaño indicado por MAX_FILE_SIZE
    echo "<h3>ERROR. El archivo supera el tamaño indicado como MAX_FILE_SIZE</h3>";
} elseif($_FILES['archivo']['error'] == UPLOAD_ERR_INI_SIZE) {
    // El tamaño del fichero supera el tamaño del upload_max_filesize
    echo "<h3>ERROR. El fichero supera el tamaño indicado por el upload_max_filesize</h3>";
} elseif($_FILES['archivo']['size'] > $limite) {
    // El fichero supera el tamaño establecido por el usuario
    echo "<h3>ERROR. El fichero supera el tamaño límite de $limite bytes</h3>";
}
?>
